
function jsBeautify(js_source_text,options)
{var input,output,token_text,last_type,last_text,last_word,current_mode,modes,indent_string;var whitespace,wordchar,punct,parser_pos,line_starters,in_case;var prefix,token_type,do_block_just_closed,var_line,var_line_tainted,if_line_flag;var indent_level;var options=options||{};var opt_indent_size=options['indent_size']||4;var opt_indent_char=options['indent_char']||' ';var opt_preserve_newlines=typeof options['preserve_newlines']==='undefined'?true:options['preserve_newlines'];var opt_indent_level=options['indent_level']||0;function trim_output()
{while(output.length&&(output[output.length-1]===' '||output[output.length-1]===indent_string)){output.pop();}}
function print_newline(ignore_repeated)
{ignore_repeated=typeof ignore_repeated==='undefined'?true:ignore_repeated;if_line_flag=false;trim_output();if(!output.length){return;}
if(output[output.length-1]!=="\n"||!ignore_repeated){output.push("\n");}
for(var i=0;i<indent_level;i++){output.push(indent_string);}}
function print_space()
{var last_output=' ';if(output.length){last_output=output[output.length-1]}
if(last_output!==' '&&last_output!=='\n'&&last_output!==indent_string){output.push(' ');}}
function print_token()
{output.push(token_text);}
function indent()
{indent_level++;}
function unindent()
{if(indent_level){indent_level--;}}
function remove_indent()
{if(output.length&&output[output.length-1]===indent_string){output.pop();}}
function set_mode(mode)
{modes.push(current_mode);current_mode=mode;}
function restore_mode()
{do_block_just_closed=current_mode==='DO_BLOCK';current_mode=modes.pop();}
function in_array(what,arr)
{for(var i=0;i<arr.length;i++)
{if(arr[i]===what){return true;}}
return false;}
function get_next_token()
{var n_newlines=0;if(parser_pos>=input.length){return['','TK_EOF'];}
var c=input.charAt(parser_pos);parser_pos+=1;while(in_array(c,whitespace)){if(parser_pos>=input.length){return['','TK_EOF'];}
if(c==="\n"){n_newlines+=1;}
c=input.charAt(parser_pos);parser_pos+=1;}
var wanted_newline=false;if(opt_preserve_newlines){if(n_newlines>1){for(var i=0;i<2;i++){print_newline(i===0);}}
wanted_newline=(n_newlines===1);}
if(in_array(c,wordchar)){if(parser_pos<input.length){while(in_array(input.charAt(parser_pos),wordchar)){c+=input.charAt(parser_pos);parser_pos+=1;if(parser_pos===input.length){break;}}}
if(parser_pos!==input.length&&c.match(/^[0-9]+[Ee]$/)&&(input.charAt(parser_pos)==='-'||input.charAt(parser_pos)==='+')){var sign=input.charAt(parser_pos);parser_pos+=1;var t=get_next_token(parser_pos);c+=sign+t[0];return[c,'TK_WORD'];}
if(c==='in'){return[c,'TK_OPERATOR'];}
if(wanted_newline&&last_type!=='TK_OPERATOR'&&!if_line_flag){print_newline();}
return[c,'TK_WORD'];}
if(c==='('||c==='['){return[c,'TK_START_EXPR'];}
if(c===')'||c===']'){return[c,'TK_END_EXPR'];}
if(c==='{'){return[c,'TK_START_BLOCK'];}
if(c==='}'){return[c,'TK_END_BLOCK'];}
if(c===';'){return[c,'TK_SEMICOLON'];}
if(c==='/'){var comment='';if(input.charAt(parser_pos)==='*'){parser_pos+=1;if(parser_pos<input.length){while(!(input.charAt(parser_pos)==='*'&&input.charAt(parser_pos+1)&&input.charAt(parser_pos+1)==='/')&&parser_pos<input.length){comment+=input.charAt(parser_pos);parser_pos+=1;if(parser_pos>=input.length){break;}}}
parser_pos+=2;return['/*'+comment+'*/','TK_BLOCK_COMMENT'];}
if(input.charAt(parser_pos)==='/'){comment=c;while(input.charAt(parser_pos)!=="\x0d"&&input.charAt(parser_pos)!=="\x0a"){comment+=input.charAt(parser_pos);parser_pos+=1;if(parser_pos>=input.length){break;}}
parser_pos+=1;if(wanted_newline){print_newline();}
return[comment,'TK_COMMENT'];}}
if(c==="'"||c==='"'||(c==='/'&&((last_type==='TK_WORD'&&last_text==='return')||(last_type==='TK_START_EXPR'||last_type==='TK_END_BLOCK'||last_type==='TK_OPERATOR'||last_type==='TK_EOF'||last_type==='TK_SEMICOLON')))){var sep=c;var esc=false;var resulting_string='';if(parser_pos<input.length){while(esc||input.charAt(parser_pos)!==sep){resulting_string+=input.charAt(parser_pos);if(!esc){esc=input.charAt(parser_pos)==='\\';}else{esc=false;}
parser_pos+=1;if(parser_pos>=input.length){break;}}}
parser_pos+=1;resulting_string=sep+resulting_string+sep;if(sep=='/'){while(parser_pos<input.length&&in_array(input.charAt(parser_pos),wordchar)){resulting_string+=input.charAt(parser_pos);parser_pos+=1;}}
return[resulting_string,'TK_STRING'];}
if(in_array(c,punct)){while(parser_pos<input.length&&in_array(c+input.charAt(parser_pos),punct)){c+=input.charAt(parser_pos);parser_pos+=1;if(parser_pos>=input.length){break;}}
return[c,'TK_OPERATOR'];}
return[c,'TK_UNKNOWN'];}
indent_string='';while(opt_indent_size--){indent_string+=opt_indent_char;}
indent_level=opt_indent_level;input=js_source_text;last_word='';last_type='TK_START_EXPR';last_text='';output=[];do_block_just_closed=false;var_line=false;var_line_tainted=false;whitespace="\n\r\t ".split('');wordchar='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_$'.split('');punct='+ - * / % & ++ -- = += -= *= /= %= == === != !== > < >= <= >> << >>> >>>= >>= <<= && &= | || ! !! , : ? ^ ^= |= ::'.split(' ');line_starters='continue,try,throw,return,var,if,switch,case,default,for,while,break,function'.split(',');current_mode='BLOCK';modes=[current_mode];parser_pos=0;in_case=false;while(true){var t=get_next_token(parser_pos);token_text=t[0];token_type=t[1];if(token_type==='TK_EOF'){break;}
switch(token_type){case'TK_START_EXPR':var_line=false;set_mode('EXPRESSION');if(last_text===';'){print_newline();}else if(last_type==='TK_END_EXPR'||last_type==='TK_START_EXPR'){}else if(last_type!=='TK_WORD'&&last_type!=='TK_OPERATOR'){print_space();}else if(in_array(last_word,line_starters)&&last_word!=='function'){print_space();}
print_token();break;case'TK_END_EXPR':print_token();restore_mode();break;case'TK_START_BLOCK':if(last_word==='do'){set_mode('DO_BLOCK');}else{set_mode('BLOCK');}
if(last_type!=='TK_OPERATOR'&&last_type!=='TK_START_EXPR'){if(last_type==='TK_START_BLOCK'){print_newline();}else{print_space();}}
print_token();indent();break;case'TK_END_BLOCK':if(last_type==='TK_START_BLOCK'){trim_output();unindent();}else{unindent();print_newline();}
print_token();restore_mode();break;case'TK_WORD':if(do_block_just_closed){print_space();print_token();print_space();break;}
if(token_text==='case'||token_text==='default'){if(last_text===':'){remove_indent();}else{unindent();print_newline();indent();}
print_token();in_case=true;break;}
prefix='NONE';if(last_type==='TK_END_BLOCK'){if(!in_array(token_text.toLowerCase(),['else','catch','finally'])){prefix='NEWLINE';}else{prefix='SPACE';print_space();}}else if(last_type==='TK_SEMICOLON'&&(current_mode==='BLOCK'||current_mode==='DO_BLOCK')){prefix='NEWLINE';}else if(last_type==='TK_SEMICOLON'&&current_mode==='EXPRESSION'){prefix='SPACE';}else if(last_type==='TK_STRING'){prefix='NEWLINE';}else if(last_type==='TK_WORD'){prefix='SPACE';}else if(last_type==='TK_START_BLOCK'){prefix='NEWLINE';}else if(last_type==='TK_END_EXPR'){print_space();prefix='NEWLINE';}
if(last_type!=='TK_END_BLOCK'&&in_array(token_text.toLowerCase(),['else','catch','finally'])){print_newline();}else if(in_array(token_text,line_starters)||prefix==='NEWLINE'){if(last_text==='else'){print_space();}else if((last_type==='TK_START_EXPR'||last_text==='=')&&token_text==='function'){}else if(last_type==='TK_WORD'&&(last_text==='return'||last_text==='throw')){print_space();}else if(last_type!=='TK_END_EXPR'){if((last_type!=='TK_START_EXPR'||token_text!=='var')&&last_text!==':'){if(token_text==='if'&&last_type==='TK_WORD'&&last_word==='else'){print_space();}else{print_newline();}}}else{if(in_array(token_text,line_starters)&&last_text!==')'){print_newline();}}}else if(prefix==='SPACE'){print_space();}
print_token();last_word=token_text;if(token_text==='var'){var_line=true;var_line_tainted=false;}
if(token_text==='if'||token_text==='else'){if_line_flag=true;}
break;case'TK_SEMICOLON':print_token();var_line=false;break;case'TK_STRING':if(last_type==='TK_START_BLOCK'||last_type==='TK_END_BLOCK'||last_type=='TK_SEMICOLON'){print_newline();}else if(last_type==='TK_WORD'){print_space();}
print_token();break;case'TK_OPERATOR':var start_delim=true;var end_delim=true;if(var_line&&token_text!==','){var_line_tainted=true;if(token_text===':'){var_line=false;}}
if(var_line&&token_text===','&&current_mode==='EXPRESSION'){var_line_tainted=false;}
if(token_text===':'&&in_case){print_token();print_newline();break;}
if(token_text==='::'){print_token();break;}
in_case=false;if(token_text===','){if(var_line){if(var_line_tainted){print_token();print_newline();var_line_tainted=false;}else{print_token();print_space();}}else if(last_type==='TK_END_BLOCK'){print_token();print_newline();}else{if(current_mode==='BLOCK'){print_token();print_newline();}else{print_token();print_space();}}
break;}else if(token_text==='--'||token_text==='++'){if(last_text===';'){start_delim=true;end_delim=false;}else{start_delim=false;end_delim=false;}}else if(token_text==='!'&&last_type==='TK_START_EXPR'){start_delim=false;end_delim=false;}else if(last_type==='TK_OPERATOR'){start_delim=false;end_delim=false;}else if(last_type==='TK_END_EXPR'){start_delim=true;end_delim=true;}else if(token_text==='.'){start_delim=false;end_delim=false;}else if(token_text===':'){if(last_text.match(/^\d+$/)){start_delim=true;}else{start_delim=false;}}
if(start_delim){print_space();}
print_token();if(end_delim){print_space();}
break;case'TK_BLOCK_COMMENT':print_newline();print_token();print_newline();break;case'TK_COMMENT':print_space();print_token();print_newline();break;case'TK_UNKNOWN':print_token();break;}
last_type=token_type;last_text=token_text;}
return output.join('');}
(function(root,factory){if(typeof exports==="object"&&exports){factory(exports);}else{var mustache={};factory(mustache);if(typeof define==="function"&&define.amd){define(mustache);}else{root.Mustache=mustache;}}}(this,function(mustache){var whiteRe=/\s*/;var spaceRe=/\s+/;var nonSpaceRe=/\S/;var eqRe=/\s*=/;var curlyRe=/\s*\}/;var tagRe=/#|\^|\/|>|\{|&|=|!/;var RegExp_test=RegExp.prototype.test;function testRegExp(re,string){return RegExp_test.call(re,string);}
function isWhitespace(string){return!testRegExp(nonSpaceRe,string);}
var Object_toString=Object.prototype.toString;var isArray=Array.isArray||function(obj){return Object_toString.call(obj)==='[object Array]';};function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");}
var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':'&quot;',"'":'&#39;',"/":'&#x2F;'};function escapeHtml(string){return String(string).replace(/[&<>"'\/]/g,function(s){return entityMap[s];});}
function Scanner(string){this.string=string;this.tail=string;this.pos=0;}
Scanner.prototype.eos=function(){return this.tail==="";};Scanner.prototype.scan=function(re){var match=this.tail.match(re);if(match&&match.index===0){this.tail=this.tail.substring(match[0].length);this.pos+=match[0].length;return match[0];}
return"";};Scanner.prototype.scanUntil=function(re){var match,pos=this.tail.search(re);switch(pos){case-1:match=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,pos);this.tail=this.tail.substring(pos);this.pos+=pos;}
return match;};function Context(view,parent){this.view=view||{};this.parent=parent;this._cache={};}
Context.make=function(view){return(view instanceof Context)?view:new Context(view);};Context.prototype.push=function(view){return new Context(view,this);};Context.prototype.lookup=function(name){var value=this._cache[name];if(!value){if(name=='.'){value=this.view;}else{var context=this;while(context){if(name.indexOf('.')>0){value=context.view;var names=name.split('.'),i=0;while(value&&i<names.length){value=value[names[i++]];}}else{value=context.view[name];}
if(value!=null)break;context=context.parent;}}
this._cache[name]=value;}
if(typeof value==='function')value=value.call(this.view);return value;};function Writer(){this.clearCache();}
Writer.prototype.clearCache=function(){this._cache={};this._partialCache={};};Writer.prototype.compile=function(template,tags){var fn=this._cache[template];if(!fn){var tokens=mustache.parse(template,tags);fn=this._cache[template]=this.compileTokens(tokens,template);}
return fn;};Writer.prototype.compilePartial=function(name,template,tags){var fn=this.compile(template,tags);this._partialCache[name]=fn;return fn;};Writer.prototype.getPartial=function(name){if(!(name in this._partialCache)&&this._loadPartial){this.compilePartial(name,this._loadPartial(name));}
return this._partialCache[name];};Writer.prototype.compileTokens=function(tokens,template){var self=this;return function(view,partials){if(partials){if(typeof partials==='function'){self._loadPartial=partials;}else{for(var name in partials){self.compilePartial(name,partials[name]);}}}
return renderTokens(tokens,self,Context.make(view),template);};};Writer.prototype.render=function(template,view,partials){return this.compile(template)(view,partials);};function renderTokens(tokens,writer,context,template){var buffer='';var token,tokenValue,value;for(var i=0,len=tokens.length;i<len;++i){token=tokens[i];tokenValue=token[1];switch(token[0]){case'#':value=context.lookup(tokenValue);if(typeof value==='object'){if(isArray(value)){for(var j=0,jlen=value.length;j<jlen;++j){buffer+=renderTokens(token[4],writer,context.push(value[j]),template);}}else if(value){buffer+=renderTokens(token[4],writer,context.push(value),template);}}else if(typeof value==='function'){var text=template==null?null:template.slice(token[3],token[5]);value=value.call(context.view,text,function(template){return writer.render(template,context);});if(value!=null)buffer+=value;}else if(value){buffer+=renderTokens(token[4],writer,context,template);}
break;case'^':value=context.lookup(tokenValue);if(!value||(isArray(value)&&value.length===0)){buffer+=renderTokens(token[4],writer,context,template);}
break;case'>':value=writer.getPartial(tokenValue);if(typeof value==='function')buffer+=value(context);break;case'&':value=context.lookup(tokenValue);if(value!=null)buffer+=value;break;case'name':value=context.lookup(tokenValue);if(value!=null)buffer+=mustache.escape(value);break;case'text':buffer+=tokenValue;break;}}
return buffer;}
function nestTokens(tokens){var tree=[];var collector=tree;var sections=[];var token;for(var i=0,len=tokens.length;i<len;++i){token=tokens[i];switch(token[0]){case'#':case'^':sections.push(token);collector.push(token);collector=token[4]=[];break;case'/':var section=sections.pop();section[5]=token[2];collector=sections.length>0?sections[sections.length-1][4]:tree;break;default:collector.push(token);}}
return tree;}
function squashTokens(tokens){var squashedTokens=[];var token,lastToken;for(var i=0,len=tokens.length;i<len;++i){token=tokens[i];if(token){if(token[0]==='text'&&lastToken&&lastToken[0]==='text'){lastToken[1]+=token[1];lastToken[3]=token[3];}else{lastToken=token;squashedTokens.push(token);}}}
return squashedTokens;}
function escapeTags(tags){return[new RegExp(escapeRegExp(tags[0])+"\\s*"),new RegExp("\\s*"+escapeRegExp(tags[1]))];}
function parseTemplate(template,tags){template=template||'';tags=tags||mustache.tags;if(typeof tags==='string')tags=tags.split(spaceRe);if(tags.length!==2)throw new Error('Invalid tags: '+tags.join(', '));var tagRes=escapeTags(tags);var scanner=new Scanner(template);var sections=[];var tokens=[];var spaces=[];var hasTag=false;var nonSpace=false;function stripSpace(){if(hasTag&&!nonSpace){while(spaces.length){delete tokens[spaces.pop()];}}else{spaces=[];}
hasTag=false;nonSpace=false;}
var start,type,value,chr,token;while(!scanner.eos()){start=scanner.pos;value=scanner.scanUntil(tagRes[0]);if(value){for(var i=0,len=value.length;i<len;++i){chr=value.charAt(i);if(isWhitespace(chr)){spaces.push(tokens.length);}else{nonSpace=true;}
tokens.push(['text',chr,start,start+1]);start+=1;if(chr=='\n')stripSpace();}}
if(!scanner.scan(tagRes[0]))break;hasTag=true;type=scanner.scan(tagRe)||'name';scanner.scan(whiteRe);if(type==='='){value=scanner.scanUntil(eqRe);scanner.scan(eqRe);scanner.scanUntil(tagRes[1]);}else if(type==='{'){value=scanner.scanUntil(new RegExp('\\s*'+escapeRegExp('}'+tags[1])));scanner.scan(curlyRe);scanner.scanUntil(tagRes[1]);type='&';}else{value=scanner.scanUntil(tagRes[1]);}
if(!scanner.scan(tagRes[1]))throw new Error('Unclosed tag at '+scanner.pos);token=[type,value,start,scanner.pos];tokens.push(token);if(type==='#'||type==='^'){sections.push(token);}else if(type==='/'){if(sections.length===0)throw new Error('Unopened section "'+value+'" at '+start);var openSection=sections.pop();if(openSection[1]!==value)throw new Error('Unclosed section "'+openSection[1]+'" at '+start);}else if(type==='name'||type==='{'||type==='&'){nonSpace=true;}else if(type==='='){tags=value.split(spaceRe);if(tags.length!==2)throw new Error('Invalid tags at '+start+': '+tags.join(', '));tagRes=escapeTags(tags);}}
var openSection=sections.pop();if(openSection)throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos);tokens=squashTokens(tokens);return nestTokens(tokens);}
mustache.name="mustache.js";mustache.version="0.7.2";mustache.tags=["{{","}}"];mustache.Scanner=Scanner;mustache.Context=Context;mustache.Writer=Writer;mustache.parse=parseTemplate;mustache.escape=escapeHtml;var defaultWriter=new Writer();mustache.clearCache=function(){return defaultWriter.clearCache();};mustache.compile=function(template,tags){return defaultWriter.compile(template,tags);};mustache.compilePartial=function(name,template,tags){return defaultWriter.compilePartial(name,template,tags);};mustache.compileTokens=function(tokens,template){return defaultWriter.compileTokens(tokens,template);};mustache.render=function(template,view,partials){return defaultWriter.render(template,view,partials);};mustache.to_html=function(template,view,partials,send){var result=mustache.render(template,view,partials);if(typeof send==="function"){send(result);}else{return result;}};}));(function(){var initializing=false,fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){};Class.extend=function(prop){var _super=this.prototype;initializing=true;var prototype=new this;initializing=false;for(var name in prop)prototype[name]=typeof prop[name]=="function"&&typeof _super[name]=="function"&&fnTest.test(prop[name])?function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);this._super=tmp;return ret}}(name,prop[name]):prop[name];function Class(){if(!initializing&&this.init)this.init.apply(this,arguments)}
Class.prototype=prototype;Class.prototype.constructor=Class;Class.extend=arguments.callee;return Class}})();function yajax(c,a,data,succ_callback,dom){if(dom){var k_disable=0;$(dom).each(function(){if($(this).data("k_disable")){k_disable=1;}});if(k_disable){return;}else{$(dom).data("k_disable",1);}}
function show_error(error){alert(error?error:'data load error!');}
var succ=function(obj){dom&&$(dom).data("k_disable",0);if(obj==null||typeof(obj)!="object"||!obj.code||obj.code==-1){console.log(obj);show_error(1);}else{succ_callback(obj);}}
var fail=function(jqXHR,textStatus,errorThrown){dom&&$(dom).data("k_disable",0);if(jqXHR.status==0&&textStatus=="error"){show_error();}else if(textStatus=="parsererror"){show_error();}else if(textStatus=="servererror"){show_error();}else{show_error();}};setTimeout(function(){$.ajax({url:getUrl(c,a),data:data,dataType:"json",type:"POST",success:succ,error:fail});},0);}
function dateFormat(time,flag){var date=new Date(time*1000);var ret='';if(!flag||flag==1){ret+=date.getFullYear();ret+='-';ret+=date.getMonth()+1;ret+='-';ret+=date.getDate();}else if(flag==2){ret+=date.getFullYear();ret+='-';ret+=date.getMonth()+1;ret+='-';ret+=date.getDate();ret+=' ';ret+=date.getHours();ret+=':';ret+=date.getMinutes();ret+=':';ret+=date.getSeconds();}
return ret;}
function time(){return Math.floor(STIME+(new Date().getTime()-CTIME)/1000);}
function getUrl(c,a,p){var ret;if(a){ret=BASEURI+'/'+c+'/'+a+'?';if(p){for(var k in p){ret+=encodeURIComponent(k)+'='+encodeURIComponent(p[k])+'&';}}}else{ret=BASEURL+'/'+c;}
return ret;}
var State={forward:function(c,a,p){location.href=getUrl(c,a,p);}}